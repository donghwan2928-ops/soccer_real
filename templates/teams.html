{% extends "base.html" %}

{% block content %}
    <h1>팀 자동 배정</h1>
    <p>현재 등록된 부원들을 실력 점수 기준으로 균형 있게 나눕니다.</p>

    <a class="btn" href="/">⬅ 메인으로 돌아가기</a>
    <a class="btn secondary" href="/members" style="margin-left:8px;">부원 목록 보기</a>

    <hr>

    {% if not members %}
        <p>등록된 부원이 없습니다. 먼저 <a href="/members/new">부원을 추가</a>해주세요.</p>
    {% else %}
        <form method="post" action="/teams" style="margin-top:12px; margin-bottom:16px;">
            <label>팀 개수 선택</label><br>
            <select name="team_count"
                    style="padding:8px; border-radius:8px; border:1px solid #d1d5db; margin-top:4px;">
                <option value="2">2팀</option>
                <option value="3">3팀</option>
            </select>
            <button type="submit" class="btn" style="margin-left:8px;">팀 배정하기</button>
        </form>

        {% if teams %}
            <h2>배정 결과</h2>

            <div style="display:flex; gap:16px; flex-wrap:wrap; margin-top:8px;">
                {% for team in teams %}
                    <div style="flex:1 1 250px; border:1px solid #e5e7eb; border-radius:12px; padding:16px; box-shadow:0 2px 6px rgba(0,0,0,0.04);">
                        <h3>팀 {{ loop.index }}</h3>
                        <p style="font-size:14px; color:#6b7280;">
                            총 실력 합: {{ team.total_skill }}
                            (인원 {{ team.members|length }}명)
                        </p>
                        <ul>
                            {% for m in team.members %}
                                <li>
                                    {{ m.name }} 
                                    ({{ m.position or "포지션 없음" }}, 실력 {{ m.skill or 0 }})
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p style="margin-top:12px; color:#6b7280;">팀 배정을 하려면 위에서 팀 개수를 선택하고 버튼을 눌러주세요.</p>
        {% endif %}
    {% endif %}

{% endblock %}
